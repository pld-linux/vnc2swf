%define		edit_version 0.3
Summary:	Screen Recorder which saves a VNC session as a .swf file
Summary(pl.UTF-8):   Nagrywacz obrazu z ekranu
Name:		vnc2swf
Version:	0.4.2
Release:	1.3
License:	GPL v2
Group:		X11/Applications
Source0:	http://www.unixuser.org/~euske/vnc2swf/%{name}-%{version}.tar.gz
# Source0-md5:	57a61191010a15cbbf8d0e3a3ec4ca11
Source1:	http://www.unixuser.org/~euske/vnc2swf/edit_vnc2swf-%{edit_version}.tar.gz
# Source1-md5:	606ed2294b20f1d2aa198d7d66ce82c3
URL:		http://www.unixuser.org/~euske/vnc2swf/
BuildRequires:	autoconf
BuildRequires:	ming-devel = 0.2a
BuildRequires:	XFree86-devel
BuildRequires:	zlib-devel
Requires:	XFree86-tools
Requires:	ming = 0.2a
BuildRoot:	%{tmpdir}/%{name}-%{version}-root-%(id -u -n)

%description
Vnc2swf is a screen recording tool. Vnc2swf captures the live motion
of a screen with VNC protocol and generates a Macromedia Flash(TM)
movie (.swf).

%description -l pl.UTF-8
Vnc2swf jest narzędziem rejestrującym obraz z ekranu. Dostęp do
ruchomej zawartości ekranu odbywa się za pośrednictwem protokołu VNC.
Wynikowy plik jest zapisany w formacie filmu Macromedia Flash (.swf).

%description -l ja.UTF-8
Vnc2Swf は VNC を録画して Flash に変換するプログラムです。

%package -n edit_vnc2swf
Summary:	Editing Tool for Vnc2swf
Summary(pl.UTF-8):   Narzędzie do edycji dla Vnc2swf
Group:		Applications
Requires:	python >= 1:2.3
Requires:	python-pygame >= 1.6
Version:	%{edit_version}
URL:		http://www.unixuser.org/~euske/vnc2swf/edit_vnc2swf.html

%description -n edit_vnc2swf
Edit_vnc2swf is an editing tool for vnc2swf. This program allows you
to chop, splice, crop, and attach an MP3 audio to a .swf (ShockWave
Flash) movie generated by vnc2swf. Also this program does some
optimization to reduce the movie size a little bit. From version 0.2,
it supports ScreenVideo format which was newly introduced in Flash
version 7. Generally with this new format a movie can lose the weight
without losing the quality, and it requires much less memory to play
on your browser.

%description -n edit_vnc2swf -l pl.UTF-8
Edit_vnc2swf to narzędzie do edycji dla vnc2swf. Ten program umożliwia
cięcie, łączenie, wycinanie i dołączanie dźwięku MP3 do filmów .swf
(ShockWave Flash) wygenerowanych przez vnc2swf. Ten program wykonuje
także pewną optymalizację w celu zmniejszenia nieco rozmiaru filmu. Od
wersji 0.2 obsługuje format ScreenVideo niedawno wprowadzony w wersji
7 Flasha. Zasadniczo przy użyciu tego nowego formatu film może
zmniejszyć rozmiar bez utraty jakości i wymaga dużo mniej pamięci do
odtwarzania w przeglądarce.

%prep
%setup -q -a1
mv edit_vnc2swf-%{edit_version} edit_vnc2swf

%build
%{__autoconf}
%configure
%{__make}

sed -e s@./vnc2swf@vnc2swf@ recordwin.sh > recordwin

%install
rm -rf $RPM_BUILD_ROOT
install -d $RPM_BUILD_ROOT%{_bindir}

install vnc2swf recordwin $RPM_BUILD_ROOT%{_bindir}
install edit_vnc2swf/edit_mp3.py $RPM_BUILD_ROOT%{_bindir}
install edit_vnc2swf/edit_vnc2swf.py $RPM_BUILD_ROOT%{_bindir}

%clean
rm -rf $RPM_BUILD_ROOT

%files
%defattr(644,root,root,755)
%doc docs/vnc2swf.html TODO sample.html
%attr(755,root,root) %{_bindir}/vnc2swf
%attr(755,root,root) %{_bindir}/recordwin

%files -n edit_vnc2swf
%defattr(644,root,root,755)
%doc edit_vnc2swf/README.html
%attr(755,root,root) %{_bindir}/edit_*
